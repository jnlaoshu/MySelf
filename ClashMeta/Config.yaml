# ğ‚ğ¥ğšğ¬ğ¡ğŒğğ­ğš&ğŒğ…ğˆ_ğ¥ğšğ¨ğ¬ğ¡ğ®è‡ªç”¨é…ç½®
# ğ”ğ‘ğ‹ï¼š https://raw.githubusercontent.com/jnlaoshu/MySelf/master/ClashMeta/Config.yaml
# ğ”ğ©ğğšğ­ğï¼š2023.05.04 15:15

######### é”šç‚¹ Start #######
# ç­–ç•¥ç»„å¼•ç”¨ç›¸å…³
pr: &pr {type: select, proxies: [é»˜è®¤,ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹,ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹,ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹,ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹,ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹,ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹,ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹,ğŸ‡®ğŸ‡³ å…¶ä»–åœ°åŒº,ğŸš€ å…¨éƒ¨èŠ‚ç‚¹,ğŸ”€ è‡ªåŠ¨ç­›é€‰,DIRECT]}

# è®¢é˜…æ›´æ–°å’Œå»¶è¿Ÿæµ‹è¯•ç›¸å…³
p: &p {type: http, interval: 3600, health-check: {enable: true, url: https://www.gstatic.com/generate_204, interval: 300}}

# æ‰‹åŠ¨é€‰æ‹©ç›¸å…³
use: &use
  type: select
  use:
  - Server1
  - Server2

######### é”šç‚¹ End #######


# url é‡Œå¡«å†™è‡ªå·±çš„è®¢é˜…,åç§°å’Œpathï¼ˆæ–‡ä»¶ä½ç½®ï¼‰å‡ä¸èƒ½é‡å¤
proxy-Servers:
  Server1:
    <<: *p
    url: "https://www.v2ny.one/api/v1/client/subscribe?token=137f3ae5248ac71fcb7c26ae4f7f33"
    path: ./proxy_Servers/Server1.yaml

  Server2:
    <<: *p
    url: "https://api.sub-100.one/link/uVrQwu01Div7XAV?sub=3&extend=1"
    path: ./proxy_Servers/Server2.yaml

mode: rule            # è§„åˆ™æ¨¡å¼ï¼šruleï¼ˆè§„åˆ™ï¼‰/globalï¼ˆå…¨å±€ä»£ç†ï¼‰/directï¼ˆå…¨å±€ç›´è¿ï¼‰/script (è„šæœ¬)
ipv6: true            # å¼€å¯ IPv6 æ€»å¼€å…³ï¼Œå…³é—­é˜»æ–­æ‰€æœ‰ IPv6 é“¾æ¥å’Œå±è”½ DNS è¯·æ±‚ AAAA è®°å½•
log-level: info       # æ—¥å¿—ç­‰çº§ silent/error/warning/info/debug
allow-lan: true       # å…è®¸å±€åŸŸç½‘çš„è¿æ¥ï¼ˆå¯ç”¨æ¥å…±äº«ä»£ç†ï¼‰
mixed-port: 7890      # HTTP(S) å’Œ SOCKS ä»£ç†æ··åˆç«¯å£
unified-delay: false
tcp-concurrent: true  #ã€Metaä¸“å±ã€‘TCP å¹¶å‘è¿æ¥æ‰€æœ‰ IP, å°†ä½¿ç”¨æœ€å¿«æ¡æ‰‹çš„ TCP

external-controller: 0.0.0.0:9090  # RESTful API ç›‘å¬åœ°å€
#external-ui: ui
secret: ""

geodata-mode: true    #ã€Metaä¸“å±ã€‘ä½¿ç”¨geoip.datæ•°æ®åº“(é»˜è®¤ï¼šfalseä½¿ç”¨mmdbæ•°æ®åº“)
geox-url:             #è‡ªå®šä¹‰ geodata url
  geoip: "https://cdn.jsdelivr.net/gh/Loyalsoldier/v2ray-rules-dat@release/geoip.dat"
  geosite: "https://cdn.jsdelivr.net/gh/Loyalsoldier/v2ray-rules-dat@release/geosite.dat"
  mmdb: "https://cdn.jsdelivr.net/gh/Loyalsoldier/geoip@release/Country.mmdb"

find-process-mode: strict
global-client-fingerprint: chrome

profile:
  store-selected: true # å­˜å‚¨ select é€‰æ‹©è®°å½•
  store-fake-ip: true  # æŒä¹…åŒ– fake-ip

sniffer:               # å—…æ¢åŸŸå å¯é€‰é…ç½®
  enable: true
  sniff:               # TLS é»˜è®¤å¦‚æœä¸é…ç½® ports é»˜è®¤å—…æ¢ 443
    TLS:
      ports: [443, 8443]
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true

tun:                   # Tun é…ç½®
  enable: true
  stack: system        # å¯é€‰ï¼š system/gvisor/lwip
                       # tunæ¨¡å¼å †æ ˆ,å¦‚æ— ä½¿ç”¨é—®é¢˜,å»ºè®®ä½¿ç”¨ system æ ˆ;
                       # MacOS ç”¨æˆ·æ¨è gvisoræ ˆ,IOSæ— æ³•ä½¿ç”¨systemæ ˆ
  dns-hijack:          # dnsåŠ«æŒ,ä¸€èˆ¬è®¾ç½®ä¸º any:53 å³å¯, å³åŠ«æŒæ‰€æœ‰53ç«¯å£çš„udpæµé‡
    - 'any:53'
# strict_route: true   # å°†æ‰€æœ‰è¿æ¥è·¯ç”±åˆ°tunæ¥é˜²æ­¢æ³„æ¼ï¼Œä½†ä½ çš„è®¾å¤‡å°†æ— æ³•å…¶ä»–è®¾å¤‡è¢«è®¿é—®
  auto-route: true     # è‡ªåŠ¨è®¾ç½®å…¨å±€è·¯ç”±ï¼Œå¯ä»¥è‡ªåŠ¨å°†å…¨å±€æµé‡è·¯ç”±è¿›å…¥tunç½‘å¡ã€‚
  auto-detect-interface: true   # è‡ªåŠ¨è¯†åˆ«å‡ºå£ç½‘å¡

dns:
  enable: true             # å…³é—­å°†ä½¿ç”¨ç³»ç»Ÿ DNS
  listen: :1053            # å¼€å¯ DNS æœåŠ¡å™¨ç›‘å¬  
  prefer-h3: true          # å¼€å¯ DoH æ”¯æŒ HTTP/3ï¼Œå°†å¹¶å‘å°è¯•
  ipv6: true               # IPV6è§£æå¼€å…³ï¼›å¦‚æœä¸ºfalseï¼Œå°†è¿”å›ipv6ç»“æœä¸ºç©º
  enhanced-mode: fake-ip   # æ¨¡å¼ï¼šredir-hostæˆ–fake-ip
  fake-ip-range: 28.0.0.1/8    # Fake-IPè§£æåœ°å€æ± 
  fake-ip-filter:          # fake ip ç™½åå•åˆ—è¡¨,ä»¥ä¸‹åœ°å€ä¸ä¼šä¸‹å‘fakeipæ˜ å°„ç”¨äºè¿æ¥
    - '*'
    - '+.lan'
  default-nameserver:      # è§£æéIPçš„dnsç”¨çš„dnsæœåŠ¡å™¨,åªæ”¯æŒçº¯IP
    - 223.5.5.5
    - 119.29.29.29
  nameserver:              # é»˜è®¤DNSæœåŠ¡å™¨ï¼Œæ”¯æŒudp/tcp/dot/doh/doq
    - 'tls://8.8.4.4#dns'
    - 'tls://1.0.0.1#dns'
  proxy-server-nameserver:
    - https://doh.pub/dns-query
  nameserver-policy:
    "geosite:cn,private":
      - https://doh.pub/dns-query
      - https://dns.alidns.com/dns-query

proxy-groups:

  - {name: é»˜è®¤, type: select, proxies: [DIRECT, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡®ğŸ‡³ å…¶ä»–åœ°åŒº, ğŸš€ å…¨éƒ¨èŠ‚ç‚¹, ğŸ”€ è‡ªåŠ¨ç­›é€‰]}

  - {name: Dns, type: select, proxies: [DIRECT, ğŸ”€ è‡ªåŠ¨ç­›é€‰, é»˜è®¤, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡®ğŸ‡³ å…¶ä»–åœ°åŒº, ğŸš€ å…¨éƒ¨èŠ‚ç‚¹]}

  - {name: Github, <<: *pr}
  
  - {name: Google, <<: *pr}
  
  - {name: OpenAI, <<: *pr}

  - {name: Spotify, <<: *pr}
  
  - {name: Telegram, <<: *pr}

  - {name: Twitter, <<: *pr}

  - {name: YouTube, <<: *pr}

  - {name: ğŸŒ å›½å†…ç›´è¿, type: select, proxies: [DIRECT, é»˜è®¤, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡®ğŸ‡³ å…¶ä»–åœ°åŒº, ğŸš€ å…¨éƒ¨èŠ‚ç‚¹, ğŸ”€ è‡ªåŠ¨ç­›é€‰]}

  - {name: ğŸŸ æ¼ç½‘ä¹‹é±¼, <<: *pr}

#èŠ‚ç‚¹åœ°åŒºåˆ†ç»„

  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, <<: *use,filter: "(?i)ğŸ‡­ğŸ‡°|HK|æ¸¯|hk|Hong"}

  - {name: ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, <<: *use, filter: "(?i)ğŸ‡¹ğŸ‡¼|TW|å°|æ¹¾|Tai"}

  - {name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, <<: *use, filter: "(?i)ğŸ‡¯ğŸ‡µ|JP|æ—¥|ä¸œäº¬|Japan"}

  - {name: ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, <<: *use, filter: "(?i)ğŸ‡ºğŸ‡¸|US|ç¾|States|American"}

  - {name: ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, <<: *use, filter: "(?i)(ğŸ‡¸ğŸ‡¬|SG|ç‹®|å¡|Singapore)"}

  - {name: ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, <<: *use, filter: "(?i)(ğŸ‡°ğŸ‡·|KR|éŸ©|KOR|korea)"}
  
  - {name: ğŸ‡®ğŸ‡³ å…¶ä»–åœ°åŒº, <<: *use, filter: "(?i)^(?!.*(?:ğŸ‡­ğŸ‡°|HK|æ¸¯|hk|Hong|ğŸ‡¹ğŸ‡¼|TW|å°|æ¹¾|Tai|ğŸ‡¯ğŸ‡µ|JP|æ—¥|ä¸œäº¬|Japan|ğŸ‡ºğŸ‡¸|US|ç¾|States|American|ğŸ‡¸ğŸ‡¬|SG|ç‹®|å¡|Singapore|ğŸ‡°ğŸ‡·|KR|éŸ©|KOR|korea)).*"}

  - {name: ğŸš€ å…¨éƒ¨èŠ‚ç‚¹, <<: *use}

  - {name: ğŸ”€ è‡ªåŠ¨ç­›é€‰, <<: *use, tolerance: 2, type: url-test}

rules:
  - GEOSITE,github,Github
  - GEOSITE,google,Google
  - GEOSITE,openai,OpenAI
  - GEOSITE,spotify,Spotify
  - GEOSITE,telegram,Telegram
  - GEOSITE,twitter,Twitter
  - GEOSITE,youtube,YouTube
  - GEOSITE,geolocation-!cn,ğŸŸ æ¼ç½‘ä¹‹é±¼

  - GEOIP,google,Google
  - GEOIP,telegram,Telegram
  - GEOIP,twitter,Twitter
  - GEOSITE,CN,ğŸŒ å›½å†…ç›´è¿
  - GEOIP,CN,ğŸŒ å›½å†…ç›´è¿
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼
