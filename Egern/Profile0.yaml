# > ğ¥ğšğ¨ğ¬ğ¡ğ®@ğ„ğ ğğ«ğ§ è‡ªç”¨é…ç½®
# > é…ç½®ä¸‹è½½ğ”ğ‘ğ‹ï¼š https://raw.githubusercontent.com/jnlaoshu/MySelf/master/Egern/Profile0.yaml
# > ğ”ğ©ğğšğ­ğ: 2025.01.26 17:00

# > å¼€å¯ipv6æ”¯æŒ
ipv6: true 

# > å…è®¸å¤–éƒ¨è¿æ¥é€šè¿‡ Wi-Fi è®¿é—®è®¾å¤‡ä¸Šçš„ä»£ç†
allow_external_connections: true

# > ä»…è™šæ‹Ÿç½‘æ¥å£æ¨¡å¼
vif_only: true

# > éšè— VPN å›¾æ ‡
hide_vpn_icon: false

# > DNS åŠ«æŒ
hijack_dns:
- '*:53'

# > æŒ‡å®šè‡ªå®šä¹‰çš„ GeoIP æ•°æ®åº“ URL
geoip_db_url: https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country.mmdb
# > æŒ‡å®šè‡ªå®šä¹‰çš„ ASN æ•°æ®åº“ URL
asn_db_url: https://raw.githubusercontent.com/P3TERX/GeoLite.mmdb/download/GeoLite2-ASN.mmdb

# > è‡ªå®šä¹‰çš„ä»£ç†å»¶è¿Ÿæµ‹è¯• URL
proxy_latency_test_url: http://cp.cloudflare.com/generate_204
# > è‡ªå®šä¹‰çš„ç›´è¿å»¶è¿Ÿæµ‹è¯• URL
direct_latency_test_url: http://www.apple.com/library/test/success.html

# > è™šæ‹Ÿç½‘ç»œæ¥å£ä¸ä½¿ç”¨é»˜è®¤çš„è·¯ç”±ï¼Œç”±å¤šä¸ªè¾ƒå°çš„è·¯ç”±åˆ‡åˆ†ç”¨äºè§£å†³æŸäº›é—®é¢˜ã€‚æ¯”å¦‚HomeKitçš„æ‘„åƒå¤´æ— æ³•ä½¿ç”¨çš„é—®é¢˜
compat_route: false

# > å¯ç”¨åç³»ç»Ÿä¼šé€šè¿‡éš§é“è·¯ç”±ç½‘ç»œæµé‡ï¼Œä½†ä¸ºç»´æŒé¢„æœŸè®¾å¤‡åŠŸèƒ½æ‰€å¿…éœ€çš„æŒ‡å®šç³»ç»ŸæœåŠ¡çš„æµé‡é™¤å¤–
include_all_networks: false

# > å¯ç”¨åç³»ç»Ÿå°†åŒ…å« Apple Push Notification æœåŠ¡ (APN) æµé‡ï¼Œä½†å‰ææ˜¯åŒ…å«æ‰€æœ‰ç½‘ç»œä¹Ÿå·²å¯ç”¨
include_apns: false

# > å¯ç”¨åç³»ç»Ÿä¼šåŒ…å«èœ‚çªç½‘ç»œæœåŠ¡ï¼Œå¦‚ Wi-Fi é€šè¯ã€å½©ä¿¡ã€çŸ­ä¿¡å’Œå¯è§†è¯­éŸ³é‚®ä»¶ï¼Œä½†å‰ææ˜¯åŒ…å«æ‰€æœ‰ç½‘ç»œä¹Ÿå·²å¯ç”¨ã€‚è¯¥å±æ€§ä¸ä¼šå½±å“ä»…ä½¿ç”¨èœ‚çªç½‘ç»œçš„æœåŠ¡ï¼ˆå¦‚ VoLTEï¼‰ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ’é™¤è¿™äº›æœåŠ¡
include_cellular_services: false

# > å¯ç”¨åç³»ç»Ÿå°†åŒ…å«ä¸æœ¬åœ°ç½‘ç»œä¸Šä¸»æœºï¼ˆå¦‚ AirPlayã€AirDrop å’Œ CarPlayï¼‰çš„ç½‘ç»œè¿æ¥ï¼Œä½†å‰ææ˜¯åŒ…å«æ‰€æœ‰ç½‘ç»œä¹Ÿå·²å¯ç”¨ã€‚é»˜è®¤å€¼æ˜¯ false
include_local_networks: false

dns:
  bootstrap:
    - 119.29.29.29
    - 223.5.5.5	
  upstreams:  # å®šä¹‰ä¸Šæ¸¸DNSæœåŠ¡å™¨çš„åˆ—è¡¨
    Domestic: 
    - https://doh.pub/dns-query 
    - https://dns.alidns.com/dns-query	
    Foreign: 
    - https://dns.google/dns-query
# > è½¬å‘DNSè¯·æ±‚çš„è§„åˆ™
  forward:  
  - proxy_rule_set:
      match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Proxy/Proxy_All.list
      value: Foreign  	  
  - regex:
      match: ^ad\..*|^ads\..*  # æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ä»¥"ad."æˆ–"ads."å¼€å¤´çš„åŸŸåï¼ˆé€šå¸¸æ˜¯å¹¿å‘Šç›¸å…³çš„åŸŸåï¼‰
      value: quic://dns.adguard-dns.com  # è¿™äº›å¹¿å‘Šç›¸å…³çš„åŸŸåä½¿ç”¨AdGuardçš„QUIC DNSæœåŠ¡å™¨
  - wildcard:
      match: '*'  # åŒ¹é…æ‰€æœ‰å…¶ä»–æœªè¢«å‰è¿°è§„åˆ™åŒ¹é…çš„åŸŸå
      value: Domestic  

# > æœ¬åœ°DNSè§£æçš„ä¸»æœºåæ˜ å°„
  hosts: 
    dns.alidns.com: 223.5.5.5, 223.6.6.6, 2400:3200:baba::1, 2400:3200::1 # https://dns.alidns.com/dns-query
    doh.pub: 1.12.12.12, 120.53.53.53 # https://doh.pub/dns-query
    dns.google: 8.8.8.8, 8.8.4.4, 2001:4860:4860::8888, 2001:4860:4860::8844 # https://dns.google/dns-query

# > æŸ¥è¯¢å…¬å…±IPåœ°å€çš„URLï¼Œç”¨äºè·å–æœ¬æœºçš„å…¬ç½‘IPåœ°å€  
  public_ip_lookup_url: https://ifconfig.me/ip  

# > ç­–ç•¥ç»„é…ç½®åˆ—è¡¨
policy_groups:
- external:
    name: AllServer
    type: select
    urls:
    - https://sub.store/download/collection/AllServer?target=Egern
    icon: ğŸŒ¹   
- select:
    name: Apple
    policies:
    - DIRECT
    - é¦™æ¸¯ä¼˜å…ˆ
    flatten: true
    icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/Apple.png
- select:
    name: AIGC
    policies:
    - ç¾å›½ä¼˜å…ˆ
    flatten: true
    icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/ChatGPT.png    
- select:
    name: Google
    policies:
    - é¦™æ¸¯ä¼˜å…ˆ
    flatten: true
    icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/Google.png
- select:
    name: Microsoft
    policies:
    - DIRECT
    - é¦™æ¸¯ä¼˜å…ˆ
    flatten: true
    icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/Microsoft.png
- select:
    name: PayPal
    policies:
    - ç¾å›½èŠ‚ç‚¹
    flatten: true
    icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/PayPal.png
- select:
    name: Spotify
    policies:
    - ç¾å›½ä¼˜å…ˆ
    flatten: true
    icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/Spotify.png    
- select:
    name: Telegram
    policies:
    - é¦™æ¸¯ä¼˜å…ˆ
    flatten: true
    icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/Telegram.png
- select:
    name: TikTok
    policies:
    - æ—¥æœ¬ä¼˜å…ˆ
    flatten: true
    icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/TikTok.png    
- select:
    name: Twitter
    policies:
    - é¦™æ¸¯ä¼˜å…ˆ
    flatten: true
    icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/Twitter.png
- select:
    name: WeChat
    policies:
    - DIRECT
    - é¦™æ¸¯ä¼˜å…ˆ
    flatten: true
    icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/WeChat.png
- select:
    name: YouTube
    policies:
    - é¦™æ¸¯ä¼˜å…ˆ
    flatten: true
    icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/YouTube.png
- auto_test:
    name: é¦™æ¸¯èŠ‚ç‚¹
    policies:
    - AllServer
    flatten: true
    filter: ğŸ‡­ğŸ‡°|æ¸¯|é¦™æ¸¯|HK|Hong
    icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/HongKong.png
- auto_test:
    name: ç¾å›½èŠ‚ç‚¹
    policies:
    - AllServer
    flatten: true
    filter: ğŸ‡ºğŸ‡¸|ç¾|ç¾å›½|US|States|American
    icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/UnitedStates.png
- auto_test:
    name: å°æ¹¾èŠ‚ç‚¹
    policies:
    - AllServer
    flatten: true
    filter: ğŸ‡¹ğŸ‡¼|å°|å°æ¹¾|TW|Tai
    icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/Taiwan.png
- auto_test:
    name: æ—¥æœ¬èŠ‚ç‚¹
    policies:
    - AllServer
    flatten: true
    filter: ğŸ‡¯ğŸ‡µ|æ—¥|æ—¥æœ¬|JP|Japan
    icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/Japan.png
- auto_test:
    name: ç‹®åŸèŠ‚ç‚¹
    policies:
    - AllServer
    flatten: true
    filter: ğŸ‡¸ğŸ‡¬|æ–°|æ–°åŠ å¡|ç‹®åŸ|SG|Singapore
    icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/Singapore.png
- auto_test:
    name: éŸ©å›½èŠ‚ç‚¹
    policies:
    - AllServer
    flatten: true
    filter: ğŸ‡°ğŸ‡·|éŸ©|éŸ©å›½|KR|KOR|Korea
    icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/Korea.png    
- select:
    name: å…¶ä»–èŠ‚ç‚¹
    policies:
    - AllServer
    flatten: true
    filter: ^((?!ğŸ‡­ğŸ‡°|æ¸¯|HK|Hong|ğŸ‡¹ğŸ‡¼|å°|TW|Tai|ğŸ‡¯ğŸ‡µ|æ—¥|JP|Japan|ğŸ‡¸ğŸ‡¬|å¡|ç‹®åŸ|SG|Singapore|ğŸ‡°ğŸ‡·|éŸ©|KR|KOR|Korea|ğŸ‡ºğŸ‡¸|ç¾|US|States|American|Music).)*$
    icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/WorldMap.png
- select:
    name: é¦™æ¸¯ä¼˜å…ˆ
    policies:
    - é¦™æ¸¯èŠ‚ç‚¹
    - ç¾å›½èŠ‚ç‚¹
    - ç‹®åŸèŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - éŸ©å›½èŠ‚ç‚¹
    - å…¶ä»–èŠ‚ç‚¹
    icon: ğŸ˜œ
- select:
    name: ç¾å›½ä¼˜å…ˆ
    policies:
    - ç¾å›½èŠ‚ç‚¹
    - é¦™æ¸¯èŠ‚ç‚¹
    - ç‹®åŸèŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - éŸ©å›½èŠ‚ç‚¹
    - å…¶ä»–èŠ‚ç‚¹
    icon: ğŸ¤£
- select:
    name: æ—¥æœ¬ä¼˜å…ˆ
    policies:
    - æ—¥æœ¬èŠ‚ç‚¹    
    - ç¾å›½èŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹    
    - éŸ©å›½èŠ‚ç‚¹
    - ç‹®åŸèŠ‚ç‚¹
    - é¦™æ¸¯èŠ‚ç‚¹
    - å…¶ä»–èŠ‚ç‚¹
    icon: ğŸ˜Š

# > ä»£ç†è§„åˆ™åˆ—è¡¨
rules:
- rule_set:
    match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/AppleProxy/AppleProxy.list
    policy: ç¾å›½ä¼˜å…ˆ
- rule_set:
    match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Apple/Apple_All.list
    policy: Apple	
- rule_set:
    match: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/Egern/Rule/AIGC.yaml
    policy: AIGC 
- rule_set:
    match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Bing/Bing.list
    policy: é¦™æ¸¯ä¼˜å…ˆ
- rule_set:
    match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/GitHub/GitHub.list
    policy: é¦™æ¸¯ä¼˜å…ˆ	
- rule_set:
    match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Google/Google.list
    policy: Google
- rule_set:
    match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Microsoft/Microsoft.list
    policy: Microsoft
- rule_set:
    match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/PayPal/PayPal.list
    policy: PayPal    
- rule_set:
    match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Spotify/Spotify.list
    policy: Spotify
- rule_set:
    match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Telegram/Telegram.list
    policy: Telegram
- rule_set:
    match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/TikTok/TikTok.list
    policy: TikTok    
- rule_set:
    match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Twitter/Twitter.list
    policy: Twitter
- rule_set:
    match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/WeChat/WeChat.list
    policy: WeChat    
- rule_set:
    match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/YouTube/YouTube.list
    policy: YouTube
- geoip:
    match: CN
    policy: DIRECT
- default:
    policy: é¦™æ¸¯ä¼˜å…ˆ

# > MITM é…ç½®
mitm:
  enabled: true
  ca_p12: egern.p12
  ca_passphrase: egern

# > æ¨¡å—é…ç½®åˆ—è¡¨
modules:
- url: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/Egern/Module/Panel.yaml
  enabled: true
- name: Sub-Store
  url: https://raw.githubusercontent.com/sub-store-org/Sub-Store/master/config/Egern.yaml  
  enabled: true  
- name: BoxJs
  url: https://raw.githubusercontent.com/chavyleung/scripts/master/box/rewrite/boxjs.rewrite.surge.sgmodule
  enabled: true
- name: ScriptHub
  url: https://raw.githubusercontent.com/Script-Hub-Org/Script-Hub/main/modules/script-hub.surge.sgmodule
  enabled: true
- name: 'iRingo Siri'
  url: https://github.com/NSRingo/Siri/releases/latest/download/iRingo.Siri.yaml
  enabled: true
- name: 'iRingo WeatherKit'
  url: https://github.com/NSRingo/WeatherKit/releases/latest/download/iRingo.WeatherKit.yaml
  enabled: true
- name: 'Spotify'
  url: https://raw.githubusercontent.com/app2smile/rules/master/module/spotify.module
  enabled: true
- name: 'YouTube Enhance'
  url: https://raw.githubusercontent.com/Maasea/sgmodule/master/YouTube.Enhance.sgmodule
  enabled: true
- name: 'BiliBili Enhanced'
  url: https://github.com/BiliUniverse/Enhanced/releases/latest/download/BiliBili.Enhanced.yaml
  enabled: true  
- name: 'BiliBiliå»å¹¿å‘Š'
  url: https://raw.githubusercontent.com/app2smile/rules/master/module/bilibili.sgmodule
  enabled: true  
- url: https://raw.githubusercontent.com/QingRex/LoonKissSurge/main/Surge/Beta/æ»´æ»´å‡ºè¡Œå»å¹¿å‘Š.beta.sgmodule
  enabled: true
- url: https://raw.githubusercontent.com/QingRex/LoonKissSurge/main/Surge/Beta/é«˜å¾·åœ°å›¾å»å¹¿å‘Š.beta.sgmodule
  enabled: true
- url: https://raw.githubusercontent.com/QingRex/LoonKissSurge/main/Surge/Beta/ç™¾åº¦åœ°å›¾å»å¹¿å‘Š.beta.sgmodule
  enabled: true
- url: https://raw.githubusercontent.com/QingRex/LoonKissSurge/main/Surge/Beta/12306å»å¹¿å‘Š.beta.sgmodule
  enabled: true  
- url: https://raw.githubusercontent.com/QingRex/LoonKissSurge/main/Surge/Beta/é—²é±¼å»å¹¿å‘Š.beta.sgmodule
  enabled: true
- url: https://raw.githubusercontent.com/QingRex/LoonKissSurge/main/Surge/Beta/äº¬ä¸œå»å¹¿å‘Š.beta.sgmodule
  enabled: true
- url: https://raw.githubusercontent.com/QingRex/LoonKissSurge/main/Surge/Beta/æ‹¼å¤šå¤šå»å¹¿å‘Š.beta.sgmodule
  enabled: true
- url: https://raw.githubusercontent.com/QingRex/LoonKissSurge/main/Surge/Beta/æ·˜å®å»å¹¿å‘Š.beta.sgmodule
  enabled: true
- url: https://raw.githubusercontent.com/QingRex/LoonKissSurge/main/Surge/Beta/ç‘å¹¸å’–å•¡å»å¹¿å‘Š.beta.sgmodule
  enabled: true  
- url: https://raw.githubusercontent.com/QingRex/LoonKissSurge/main/Surge/Beta/ä»€ä¹ˆå€¼å¾—ä¹°å»å¹¿å‘Š.beta.sgmodule
  enabled: true
- url: https://raw.githubusercontent.com/QingRex/LoonKissSurge/main/Surge/Beta/å°çº¢ä¹¦å»å¹¿å‘Š.beta.sgmodule
  enabled: true
- url: https://raw.githubusercontent.com/QingRex/LoonKissSurge/main/Surge/Beta/é…·æˆ‘éŸ³ä¹å»å¹¿å‘Š.beta.sgmodule
  enabled: true
- url: https://raw.githubusercontent.com/QingRex/LoonKissSurge/main/Surge/Beta/é…·ç‹—éŸ³ä¹å»å¹¿å‘Š.beta.sgmodule
  enabled: true
- url: https://raw.githubusercontent.com/QingRex/LoonKissSurge/main/Surge/Beta/QQéŸ³ä¹å»å¹¿å‘Š.beta.sgmodule
  enabled: true
- url: https://raw.githubusercontent.com/QingRex/LoonKissSurge/main/Surge/Beta/ç½‘æ˜“äº‘éŸ³ä¹å»å¹¿å‘Š.beta.sgmodule
  enabled: true
- url: https://raw.githubusercontent.com/QingRex/LoonKissSurge/main/Surge/Beta/å–œé©¬æ‹‰é›…å»å¹¿å‘Š.beta.sgmodule
  enabled: true  
- url: https://raw.githubusercontent.com/QingRex/LoonKissSurge/main/Surge/Beta/è…¾è®¯è§†é¢‘å»å¹¿å‘Š.beta.sgmodule
  enabled: true
- url: https://raw.githubusercontent.com/QingRex/LoonKissSurge/main/Surge/Beta/ä¼˜é…·è§†é¢‘å»å¹¿å‘Š.beta.sgmodule
  enabled: true
- url: https://raw.githubusercontent.com/QingRex/LoonKissSurge/main/Surge/Beta/çˆ±å¥‡è‰ºè§†é¢‘å»å¹¿å‘Š.beta.sgmodule
  enabled: true
- url: https://raw.githubusercontent.com/QingRex/LoonKissSurge/main/Surge/Beta/èŠ’æœTVå»å¹¿å‘Š.beta.sgmodule
  enabled: true  
- url: https://raw.githubusercontent.com/QingRex/LoonKissSurge/main/Surge/Beta/å¾®ä¿¡å…¬ä¼—å·å»å¹¿å‘Š.beta.sgmodule
  enabled: true
- url: https://raw.githubusercontent.com/QingRex/LoonKissSurge/main/Surge/Beta/å¾®ä¿¡å¤–éƒ¨é“¾æ¥è§£é”.beta.sgmodule
  enabled: true
- url: https://raw.githubusercontent.com/QingRex/LoonKissSurge/main/Surge/Beta/äº‘é—ªä»˜å»å¹¿å‘Š.beta.sgmodule
  enabled: true
- url: https://raw.githubusercontent.com/QingRex/LoonKissSurge/main/Surge/Beta/é›ªçƒå»å¹¿å‘Š.beta.sgmodule
  enabled: true
- url: https://raw.githubusercontent.com/QingRex/LoonKissSurge/main/Surge/Beta/é£å®¢å»å¹¿å‘Š.beta.sgmodule
  enabled: true
- url: https://raw.githubusercontent.com/QingRex/LoonKissSurge/main/Surge/Beta/ç¾å›¾ç§€ç§€å»å¹¿å‘Š.beta.sgmodule
  enabled: true
- url: https://raw.githubusercontent.com/QingRex/LoonKissSurge/main/Surge/Beta/ç¾é¢œç›¸æœºå»å¹¿å‘Š.beta.sgmodule
  enabled: true
- url: https://raw.githubusercontent.com/QingRex/LoonKissSurge/main/Surge/Beta/å‘æ—¥è‘µå»å¹¿å‘Š.beta.sgmodule
  enabled: true
