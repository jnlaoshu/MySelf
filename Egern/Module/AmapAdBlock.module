#!name=高德地图去广告
#!desc=纯净版高德地图广告清理模块，极限净化
#!author=AI 修改， RuCu6, ddgksf2013
#!category=AdBlock
#!date=2026-02-12 21:40

[Rule]
# ===============================
# 高德广告域名屏蔽
# ===============================
# 开屏广告、首页Banner、导航页、附近页、打车页等
DOMAIN,amap-aos-info-nogw.amap.com,REJECT,extended-matching,pre-matching
DOMAIN,free-aos-cdn-image.amap.com,REJECT,extended-matching,pre-matching
DOMAIN-SUFFIX,v.smtcdns.com,REJECT,extended-matching,pre-matching
DOMAIN-SUFFIX,amap.com,REJECT,extended-matching,pre-matching

[Body Rewrite]
# ===============================
# 高德关键接口 JQ 清理
# ===============================
# 搜索页、打车页、导航页等关键广告数据
http-response-jq ^https:\/\/m5\.amap\.com\/ws\/shield\/.* 'delpaths([["data","commonMaterial"],["data","tipsOperationLocation"],["data","resourcePlacement"],["history_tags"]])'
http-response-jq ^https:\/\/m5-zb\.amap\.com\/ws\/sharedtrip\/taxi\/order_detail_car_tips\? 'delpaths([["data","carTips","data","popupInfo"]])'

[Map Local]
# ===============================
# 高德 Mock 响应（防占位显示）
# ===============================
^https:\/\/m5\.amap\.com\/ws\/.* data-type=text data="{}" status-code=200 header="Content-Type:application/json"
^https:\/\/oss\.amap\.com\/ws\/.* data-type=text data="{}" status-code=200 header="Content-Type:application/json"
^https:\/\/sns\.amap\.com\/ws\/.* data-type=text data="{}" status-code=200 header="Content-Type:application/json"

[Script]
# ===============================
# 高德广告脚本处理
# ===============================
http-response ^https:\/\/m5\.amap\.com\/ws\/.* script-path=https://kelee.one/Resource/JavaScript/Amap/Amap_remove_ads.js, requires-body=true, tag=高德_全面广告清理
http-response ^https:\/\/m5-zb\.amap\.com\/ws\/.* script-path=https://kelee.one/Resource/JavaScript/Amap/Amap_remove_ads.js, requires-body=true, tag=高德_全面广告清理

[MITM]
# 高德 MITM 主机名
hostname = %APPEND% *.amap.com