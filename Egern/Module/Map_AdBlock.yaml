#!name=é«˜å¾·+ç™¾åº¦åœ°å›¾ å»å¹¿å‘Š (é•¿æœŸç»´æŠ¤ç‰ˆ)
#!desc=é›†æˆæœ¬åœ°é™æ€æ‹¦æˆªä¸åŠ¨æ€è„šæœ¬å‡€åŒ–ã€‚æ¨¡å—åŒ–æ³¨é‡Šï¼Œä¾¿äºæ’æŸ¥é—®é¢˜ã€‚
#!author=AI
#!category=Map
#!icon=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Map_Google.png

#############################################
# 1. MITM (è§£å¯†æ ¸å¿ƒ)
# ä½œç”¨ï¼šå…è®¸ä»£ç†è½¯ä»¶è§£å¯† HTTPS æµé‡ï¼Œå¦åˆ™æ— æ³•å»é™¤å¹¿å‘Š
#############################################
[MITM]
# âš ï¸ æ³¨æ„ï¼šä¸è¦éšæ„åˆ é™¤ hostnameï¼Œå¦åˆ™è„šæœ¬æ— æ³•ç”Ÿæ•ˆ
# âš ï¸ æ³¨æ„ï¼šä¹Ÿä¸è¦éšæ„å¢åŠ  *.baidu.com å…¨åŒ¹é…ï¼Œé˜²æ­¢ç™¾åº¦ç½‘ç›˜/è´´å§æ— æ³•è¿æ¥
hostname = *.amap.com, *.baidu.com, newclient.map.baidu.com, afd.baidu.com, yongche.baidu.com, ecom.map.baidu.com, maphotel.baidu.com

#############################################
# 2. åŸŸåæ‹¦æˆª (Rule)
# ä½œç”¨ï¼šç›´æ¥é˜»æ–­å¹¿å‘ŠæœåŠ¡å™¨è¿æ¥ï¼Œæœ€å½»åº•ï¼Œä½†å®¹æ˜“è¯¯æ€
#############################################
[Rule]
# -----------------
# > é«˜å¾·åœ°å›¾ (Amap)
# -----------------
# [é˜¿é‡Œç³»æ¨å¹¿DNS] æ‹¦æˆªåå¯é˜²æ­¢éƒ¨åˆ†è¿½è¸ª
DOMAIN,adash-emas.cn-hangzhou.aliyuncs.com,REJECT
DOMAIN,amap-aos-info-nogw.amap.com,REJECT
# [é˜¿é‡Œå¹¿å‘ŠSDK] æ ¸å¿ƒå¹¿å‘ŠåŸŸå
DOMAIN-SUFFIX,alimama.com,REJECT
DOMAIN-SUFFIX,v.smtcdns.com,REJECT
# [å›¾æ ‡CDN] âš ï¸ å¦‚æœå‘ç°åœ°å›¾ä¸Šçš„åŠŸèƒ½å›¾æ ‡ä¸¢å¤±/å˜æˆç©ºç™½ï¼Œè¯·åœ¨æ­¤è¡Œå‰åŠ  # æ³¨é‡Šæ‰
DOMAIN,free-aos-cdn-image.amap.com,REJECT

# -----------------
# > ç™¾åº¦åœ°å›¾ (Baidu)
# -----------------
# [ç™¾åº¦å¹¿å‘Šè”ç›Ÿ] æ‹¦æˆªç™¾åº¦ç³»é€šç”¨çš„å¹¿å‘Šæ¥å£
DOMAIN,mobads.baidu.com,REJECT
DOMAIN,mobads-logs.baidu.com,REJECT
DOMAIN,crm.baidu.com,REJECT
DOMAIN,eclick.baidu.com,REJECT
DOMAIN,nsclick.baidu.com,REJECT
DOMAIN,toblog.baidu.com,REJECT

#############################################
# 3. Map Local (é™æ€å±è”½)
# ä½œç”¨ï¼šç›´æ¥ç»™å¹¿å‘Šæ¥å£è¿”å›ç©ºæ•°æ®ã€‚
# ğŸ”§ ç»´æŠ¤æŒ‡å—ï¼š
# å¦‚æœæŸä¸ªåŠŸèƒ½ï¼ˆå¦‚æ‰“è½¦ï¼‰æ— æ³•åŠ è½½ï¼Œè¯·æ‰¾åˆ°å¯¹åº”æ³¨é‡Šè¡Œï¼Œåœ¨è¯¥è¡Œæœ€å‰é¢åŠ  # å·ç¦ç”¨å³å¯ã€‚
#############################################
[Map Local]
# -----------------
# > é«˜å¾·åœ°å›¾ (Amap)
# -----------------
# [å¼€å±å¹¿å‘Š] å¯åŠ¨æ—¶çš„å…¨å±å¹¿å‘Š (m5-zb æ˜¯å¤‡ç”¨åŸŸå)
^https:\/\/m5(-zb)?\.amap\.com\/ws\/valueadded\/alimama\/splash_screen data="{}" status-code=200 header="Content-Type:application/json"

# [æ¨ªå¹…å¹¿å‘Š] é¦–é¡µæˆ–å„çº§é¡µé¢é¡¶éƒ¨çš„ Banner æ¡
^https:\/\/oss\.amap\.com\/ws\/banner\/.* data="{}" status-code=200 header="Content-Type:application/json"

# [åœºæ™¯æ¨è] æœç´¢æ¡†é™„è¿‘å¼¹å‡ºçš„â€œæ¨èå»å¤„â€
^https:\/\/m5(-zb)?\.amap\.com\/ws\/shield\/scene\/recommend\? data="{}" status-code=200 header="Content-Type:application/json"

# [é¦–é¡µé…ç½®] âš ï¸ é«˜é£é™©ï¼šå¦‚æœé«˜å¾·ä¸»é¡µä¸€ç‰‡ç©ºç™½æˆ–æ— é™åŠ è½½ï¼Œè¯·æ³¨é‡Šæ‰ä¸‹é¢è¿™ä¸€è¡Œ
^https:\/\/m5(-zb)?\.amap\.com\/ws\/aos\/main\/page\/.* data="{}" status-code=200 header="Content-Type:application/json"

# [å¯¼èˆªç»“æŸé¡µ] å¯¼èˆªç»“æŸåçš„æ¨é”€é¡µé¢
^https:\/\/m5(-zb)?\.amap\.com\/ws\/faas\/amap-navigation\/main-page.* data="{}" status-code=200 header="Content-Type:application/json"

# [æ‰“è½¦/é…’åº—/å‘¨è¾¹] âš ï¸ å¦‚æœä½ ç»å¸¸ç”¨é«˜å¾·æ‰“è½¦ï¼Œå»ºè®®æ³¨é‡Šæ‰ä¸‹é¢ä»¥ c3frontend å¼€å¤´çš„è¡Œ
^https:\/\/m5(-zb)?\.amap\.com\/ws\/c3frontend\/af-(?:hotel|nearby|launch)\/.* data="{}" status-code=200 header="Content-Type:application/json"
^https:\/\/m5(-zb)?\.amap\.com\/ws\/boss\/order\/car\/feedback\/.* data="{}" status-code=200 header="Content-Type:application/json"
^https:\/\/m5(-zb)?\.amap\.com\/ws\/sharedtrip\/taxi\/.*tips data="{}" status-code=200 header="Content-Type:application/json"

# [å…¶ä»–æ‚é¡¹] æ„ŸçŸ¥æœåŠ¡ä¸AIæ¨è
^https:\/\/m5(-zb)?\.amap\.com\/ws\/aos\/perception\/.* data="{}" status-code=200 header="Content-Type:application/json"
^https:\/\/ai\.amap\.com\/v1\/ai_rec\/home_qs\? data="{}" status-code=200 header="Content-Type:application/json"

# -----------------
# > ç™¾åº¦åœ°å›¾ (Baidu)
# -----------------
# [æ›´æ–°æ£€æµ‹] å±è”½ç‰ˆæœ¬æ›´æ–°æç¤ºä¸å…¥å£
^https:\/\/afd\.baidu\.com\/afd\/entry\?action=(update|query) data="{}" status-code=200 header="Content-Type:application/json"
# [è¿è¥æ´»åŠ¨] å±è”½è¿è¥å¼¹çª—
^https:\/\/ecom\.map\.baidu\.com\/ad-ops\/.* data="{}" status-code=200 header="Content-Type:application/json"
# [æ‰“è½¦/é…’åº—] å¦‚æœä½¿ç”¨ç™¾åº¦æ‰“è½¦ï¼Œè¯·æ³¨é‡Šæ‰ä¸‹é¢ä¸¤è¡Œ
^https:\/\/yongche\.baidu\.com\/gomarketing\/api\/popup\/getentrancecordovaurl$ data="{}" status-code=200 header="Content-Type:application/json"
^https:\/\/yongche\.baidu\.com\/goorder\/passenger\/.* data="{}" status-code=200 header="Content-Type:application/json"
^https:\/\/maphotel\.baidu\.com\/hotel\/goextranet\/activity\/detail\? data="{}" status-code=200 header="Content-Type:application/json"

#############################################
# 4. Script (åŠ¨æ€å‡€åŒ–)
# ä½œç”¨ï¼šæ™ºèƒ½ä¿®æ”¹æ•°æ®åŒ…ã€‚è¿™éƒ¨åˆ†ä¼šè‡ªåŠ¨éšè¿œç¨‹ GitHub æ›´æ–°ï¼Œæ— éœ€æ‰‹åŠ¨ç»´æŠ¤ã€‚
#############################################
[Script]

# > é«˜å¾·åœ°å›¾è„šæœ¬ (keleeone)
# åŒ…å« m5 å’Œ m5-zb æ³›è§£æ
é«˜å¾·åœ°å›¾_å‡€åŒ– = type=http-response, pattern=^https:\/\/(?:m5|m5-zb)\.amap\.com\/ws\/.*, script-path=https://raw.githubusercontent.com/keleeone/AmapAdsAutoPatch/main/Amap_remove_ads.js, requires-body=true, timeout=30

# > ç™¾åº¦åœ°å›¾è„šæœ¬ (jadkg)
# é’ˆå¯¹ newclient æ¥å£
ç™¾åº¦åœ°å›¾_å‡€åŒ– = type=http-response, pattern=^https:\/\/newclient\.map\.baidu\.com\/client\/phpui2\/\?qt=ads, script-path=https://raw.githubusercontent.com/jadkg/egern/main/Script/BaiduMap.js, requires-body=true, timeout=30
