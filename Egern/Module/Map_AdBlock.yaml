#!name=百度地图+高德地图去广告
#!desc=最大化清理广告，全面屏蔽所有百度和高德广告接口
#!author=AI，RuCu6,ddgksf2013
#!category=AdBlock
#!date=2026-02-12 21:52

[Rule]
# 百度广告域名封杀
DOMAIN,newclient.map.baidu.com,REJECT,extended-matching,pre-matching
DOMAIN,httpdns.baidubce.com,REJECT,extended-matching,pre-matching
DOMAIN,ugc.map.baidu.com,REJECT,extended-matching,pre-matching
DOMAIN-SUFFIX,baidu.com,REJECT,extended-matching,pre-matching

# 高德广告域名封杀
DOMAIN-SUFFIX,amap.com,REJECT,extended-matching,pre-matching
DOMAIN-SUFFIX,v.smtcdns.com,REJECT,extended-matching,pre-matching

[Body Rewrite]
# 百度 JQ 全量删除广告字段
http-response-jq ^https?:\/\/.*map\.baidu\.com\/.* 'delpaths([["data","posts"],["data","ads"],["data","promotion"],["Result","data"]])'

# 高德 JQ 全量删除广告字段
http-response-jq ^https:\/\/m5\.amap\.com\/ws\/.* 'delpaths([["data","commonMaterial"],["data","tipsOperationLocation"],["data","resourcePlacement"],["history_tags"],["data","promotion"]])'

[Map Local]
# 百度 Mock 全量接口
^https?:\/\/newclient\.map\.baidu\.com\/.* data-type=text data="{}" status-code=200

# 高德 Mock 全量接口
^https:\/\/.*\.amap\.com\/ws\/.* data-type=text data="{}" status-code=200 header="Content-Type:application/json"

[Script]
# 高德广告脚本处理
http-response ^https:\/\/.*\.amap\.com\/ws\/.* script-path=https://kelee.one/Resource/JavaScript/Amap/Amap_remove_ads.js, requires-body=true, tag=高德_全面广告清理

[MITM]
hostname = %APPEND% 180.76.76.200, newclient.map.baidu.com, httpdns.baidubce.com, ugc.map.baidu.com, *.amap.com