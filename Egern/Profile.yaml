# > ğ¥ğšğ¨ğ¬ğ¡ğ®@ğ„ğ ğğ«ğ§ è‡ªç”¨é…ç½®
# > é…ç½®ä¸‹è½½ğ”ğ‘ğ‹ï¼š https://raw.githubusercontent.com/jnlaoshu/MySelf/master/Egern/Profile.yaml
# > ğ”ğ©ğğšğ­ğ: 2023.10.22 21:20
---

dns_servers:
  - "https://doh.pub/dns-query"

hosts:
  '*twitter*': 8.8.8.8
  '*youtube*': 8.8.8.8
  '*x.com': 8.8.8.8
  '*telegram*': 8.8.8.8
  '*googlevideo*': 8.8.8.8
  '*facebook*': 8.8.8.8
  '*.taobao.com*': 223.5.5.5
  '*.tmall.com*': 223.5.5.5
  '*.alipay.com*': 223.5.5.5
  '*.alicdn.com*': 223.5.5.5
  '*.aliyun.com*': 223.5.5.5
  '*.jd.com*': 119.28.28.28
  '*.qq.com*': 119.28.28.28
  '*.bilibili.com*': 119.29.29.29
  'hdslb.com*': 119.29.29.29
  '*.163.com*': 119.29.29.29
  '*.126.com*': 119.29.29.29
  '*.126.net*': 119.29.29.29
  '*.127.net*': 119.29.29.29
  '*.netease.com*': 119.29.29.29
  '*.mi.com*': 119.29.29.29
  '*.xiaomi.com*': 119.29.29.29
  '*.icloud.com*': 119.29.29.29
  '*.icloud.com.cn*': 119.29.29.29
  '*.tencent.com*': 119.29.29.29
  '*.weixin.com*': 119.29.29.29
  
#å®‰å…¨çš„DNSæœåŠ¡å™¨
secure_dns:
  servers:
    - https://8.8.8.8
  ecs: true
  public_ip_lookup_url: "https://ifconfig.me/ip"
  exclude:
    - localhost
    - '*.apple.com'
    - '*.mzstatic.com'    

#ç­–ç•¥ç»„é…ç½®åˆ—è¡¨ 
policy_groups:
  - select:
      name: âœˆï¸ é€‰æ‹©ä»£ç†
      policies:
        - â™»ï¸ è‡ªåŠ¨åˆ‡æ¢
        - ğŸ”€ æ‰‹åŠ¨é€‰æ‹©
        - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
        - ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹
        - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
        - ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹
        - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
        - ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
        - ğŸ‡ºğŸ‡³ å…¶ä»–èŠ‚ç‚¹
        - DIRECT
  - external:
      name: â™»ï¸ è‡ªåŠ¨åˆ‡æ¢
      type: auto_test
      url: "https://sub.store/download/collection/AllServer?target=Surge"
  - external:
      name: ğŸ”€ æ‰‹åŠ¨é€‰æ‹©
      type: select
      url: "https://sub.store/download/collection/AllServer?target=Surge"
      filter: ^(?=.*(.*))(?!.*((?i)å›å›½|æ ¡å›­|æ•™è‚²|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|åˆ°æœŸ|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|ç¾¤|(\b(GAME|USE|USED|TOTAL|EXPIRE|EMAIL)\b|(\d{4}-\d{2}-\d{2}|\dG)))).*$    
  - external:
      name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
      type: auto_test
      url: "https://sub.store/download/collection/AllServer?target=Surge"
      filter: æ¸¯|ğŸ‡­ğŸ‡°|HK|Hong
      interval: 900
      timeout: 2
      tolerance: 150
      update_interval: 86400      
  - external:
      name: ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹
      type: auto_test
      url: "https://sub.store/download/collection/AllServer?target=Surge"
      filter: å°|ğŸ‡¹ğŸ‡¼|TW|Tai
      interval: 900
      timeout: 2
      tolerance: 150
      update_interval: 86400      
  - external:
      name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      type: auto_test
      url: "https://sub.store/download/collection/AllServer?target=Surge"
      filter: æ—¥|ğŸ‡¯ğŸ‡µ|JP|Japan
      interval: 900
      timeout: 2
      tolerance: 150
      update_interval: 86400      
  - external:
      name: ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹
      type: auto_test
      url: "https://sub.store/download/collection/AllServer?target=Surge"
      filter: å¡|ğŸ‡¸ğŸ‡¬|ç‹®åŸ|SG|Singapore
      interval: 900
      timeout: 2
      tolerance: 150
      update_interval: 86400      
  - external:
      name: ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
      type: auto_test
      url: "https://sub.store/download/collection/AllServer?target=Surge"
      filter: ç¾|ğŸ‡ºğŸ‡²|US|States|American
      interval: 900
      timeout: 2
      tolerance: 150
      update_interval: 86400      
  - external:
      name: ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
      type: auto_test
      url: "https://sub.store/download/collection/AllServer?target=Surge"
      filter: éŸ©|éŸ“|ğŸ‡°ğŸ‡·|KR|KOR|Korea
      interval: 900
      timeout: 2
      tolerance: 150
      update_interval: 86400      
  - external:
      name: ğŸ‡ºğŸ‡³ å…¶ä»–èŠ‚ç‚¹
      type: auto_test
      url: "https://sub.store/download/collection/AllServer?target=Surge"
      filter: ^((?!ğŸ‡­ğŸ‡°|æ¸¯|HK|Hong|ğŸ‡¹ğŸ‡¼|å°|TW|Tai|ğŸ‡¯ğŸ‡µ|æ—¥|JP|Japan|ğŸ‡¸ğŸ‡¬|å¡|ç‹®åŸ|SG|Singapore|ğŸ‡°ğŸ‡·|éŸ©|KR|KOR|Korea|ğŸ‡ºğŸ‡¸|ç¾|US|States|American).)*$
      interval: 900
      timeout: 2
      tolerance: 150
      update_interval: 86400 
      
#ä»£ç†è§„åˆ™åˆ—è¡¨      
rules:
  - rule_set:
      match: "https://anti-ad.net/surge.txt"
      policy: REJECT
  - rule_set:
      match: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Advertising/Advertising.yaml"
      policy: REJECT
  - rule_set:
      match: "https://raw.githubusercontent.com/DivineEngine/Profiles/master/Clash/RuleSet/StreamingMedia/Streaming.yaml"
      policy: âœˆï¸ é€‰æ‹©ä»£ç†
  - rule_set:
      match: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Global/Global.yaml"
      policy: âœˆï¸ é€‰æ‹©ä»£ç†
  - rule_set:
      match: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.yaml"
      policy: âœˆï¸ é€‰æ‹©ä»£ç†
  - rule_set:
      match: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Bing/Bing.yaml"
      policy: ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
  - rule_set:
      match: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.yaml"
      policy: ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹  
  - rule_set:
      match: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/PayPal/PayPal.yaml"
      policy: ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹    
  - rule_set:
      match: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Twitter/Twitter.yaml"
      policy: âœˆï¸ é€‰æ‹©ä»£ç†
  - rule_set:
      match: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.yaml"
      policy: âœˆï¸ é€‰æ‹©ä»£ç†
  - rule_set:
      match: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.yaml"
      policy: âœˆï¸ é€‰æ‹©ä»£ç†
  - rule_set:
      match: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple.yaml"
      policy: DIRECT
  - rule_set:
      match: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/WeChat/WeChat.yaml"
      policy: DIRECT      
  - rule_set:
      match: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/China/China.yaml"
      policy: DIRECT
  - ip_cidr:
      match: 192.168.0.0/16
      policy: DIRECT
  - ip_cidr:
      match: 10.0.0.0/8
      policy: DIRECT
  - ip_cidr:
      match: 127.0.0.0/8
      policy: DIRECT
  - ip_cidr:
      match: 172.16.0.0/12
      policy: DIRECT
  - ip_cidr:
      match: 192.128.0.0/16
      policy: DIRECT
  - geoip:
      match: CN
      policy: DIRECT
  - default:
      policy: âœˆï¸ é€‰æ‹©ä»£ç†
      
#URLé‡å†™åˆ—è¡¨
url_rewrites:
  #GoogleåŸŸåé‡å®šå‘
  - match: ^https?:\/\/(www.)?(g|google)\.cn
    location: https://www.google.com
    status_code: 302
    
#MITMé…ç½®     
mitm:
  enable: true
  ca_p12: egern.p12
  ca_passphrase: egern
  hostnames:
    - www.google.com

#æ¨¡å—é…ç½®åˆ—è¡¨  
modules:
- name: 'Sub-Storeè®¢é˜…'
  url: https://raw.githubusercontent.com/sub-store-org/Sub-Store/master/config/Surge.sgmodule
  enabled: true
- name: 'Spotify è§£é”'
  url: https://raw.githubusercontent.com/app2smile/rules/master/module/spotify.module
  enabled: true
- name: ''
  url: https://raw.githubusercontent.com/Maasea/sgmodule/master/YoutubeAds.sgmodule
  enabled: true
- name: 'DualSubsYouTube'
  url: https://github.com/DualSubs/YouTube/raw/main/modules/DualSubs.YouTube.sgmodule
  enabled: true
- name: 'Nicegramä¼šå‘˜'
  url: https://raw.githubusercontent.com/I-am-R-E/Functional-Store-Hub/Master/Nicegram/Surge.sgmodule
  enabled: true   
- name: ''
  url: https://github.com/blackmatrix7/ios_rule_script/blob/master/rewrite/Surge/BlockHTTPDNS/BlockHTTPDNS.sgmodule
  enabled: true
- name: ''
  url: https://github.com/blackmatrix7/ios_rule_script/blob/master/rewrite/Surge/General/General.sgmodule
  enabled: true
- name: ''
  url: https://raw.githubusercontent.com/Semporia/TikTok-Unlock/master/Surge/TiKTok-JP.sgmodule
  enabled: true
- name: ''
  url: https://yfamily.vercel.app/module/AdBlock.module
  enabled: true
- name: ''
  url: https://yfamily.vercel.app/module/documents.module
  enabled: true
- name: ''
  url: https://yfamily.vercel.app/module/adguard.module
  enabled: true
- name: ''
  url: https://yfamily.vercel.app/module/aliyun.module
  enabled: true
- name: ''
  url: https://yfamily.vercel.app/module/bili.module
  enabled: true
- name: ''
  url: https://yfamily.vercel.app/sgmodule/biliad.module
  enabled: true
- name: ''
  url: https://yfamily.vercel.app/module/notability.module
  enabled: true
- name: ''
  url: https://yfamily.vercel.app/module/wechatad.module
  enabled: true
- name: ''
  url: https://yfamily.vercel.app/module/weiboad.module
  enabled: true
- name: ''
  url: https://yfamily.vercel.app/sgmodule/ZhihuBlock.sgmodule
  enabled: true
- name: ''
  url: https://yfamily.vercel.app/sgmodule/weibolitead.module
  enabled: true
- name: ''
  url: https://github.com/blackmatrix7/ios_rule_script/blob/master/rewrite/Surge/AllInOne/AllInOne.sgmodule
  enabled: true
