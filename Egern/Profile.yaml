# ğ„ğ ğğ«ğ§@ğ¥ğšğ¨ğ¬ğ¡ğ®ä¸“ç”¨é…ç½®
# ä¼˜åŒ–æ—¶é—´: 2026.02.18 06:50

# è‡ªåŠ¨æ›´æ–°é…ç½® (å¦‚éœ€å¯ç”¨è¯·å–æ¶ˆæ³¨é‡Š)
# auto_update:
# url: https://raw.githubusercontent.com/jnlaoshu/MySelf/master/Egern/Profile.yaml
# interval: 86400

# â€” åŸºç¡€é…ç½® â€”
ipv6: true
http_port: 3080
socks_port: 3090
allow_external_connections: true
vif_only: true
hide_vpn_icon: true

# â€” DNS åŠ«æŒ â€”
hijack_dns:
- â€˜*:53â€™

# â€” æ•°æ®åº“ â€”
geoip_db_url: https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country.mmdb
asn_db_url: https://raw.githubusercontent.com/Loyalsoldier/geoip/release/GeoLite2-ASN.mmdb

# â€” å»¶è¿Ÿæµ‹è¯• â€”
proxy_latency_test_url: http://www.gstatic.com/generate_204
direct_latency_test_url: http://www.apple.com/library/test/success.html

# â€” è·¯ç”±é€‰é¡¹ â€”
compat_route: false
include_all_networks: false
include_apns: false
include_cellular_services: false
include_local_networks: false

# â€” DNS é…ç½® â€”
dns:
bootstrap:
- system
- 223.5.5.5
- 119.29.29.29
- 2400:3200::1
upstreams:
AliDNS:
- h3://dns.alidns.com/dns-query
DNSPod:
- https://doh.pub/dns-query
Default:
- https://doh.pub/dns-query
- h3://dns.alidns.com/dns-query
forward:
# é˜¿é‡Œç³»åŸŸå â†’ é˜¿é‡Œ DNS (æœ¬åœ°åŒ¹é…, é¿å…è¿œç¨‹è§„åˆ™é›†å»¶è¿Ÿ)
- domain_suffix:
match:
- alibaba.com
- alibabacloud.com
- aliyun.com
- alipay.com
- taobao.com
- tmall.com
- amap.com
- youku.com
- dingtalk.com
- ele.me
- cainiao.com
- hema.com
- lazada.com
value: AliDNS
# è…¾è®¯ç³»åŸŸå â†’ DNSPod
- domain_suffix:
match:
- tencent.com
- qq.com
- wechat.com
- weixin.qq.com
- qcloud.com
- cloudbase.net
- weiyun.com
- qpic.cn
- gtimg.com
- idqqimg.com
- tim.qq.com
- smoba.qq.com
value: DNSPod
# æœ€ç»ˆå…œåº•
- wildcard:
match: â€˜*â€™
value: Default

public_ip_lookup_url: https://myip.ipip.net

# â€” ç­–ç•¥ç»„ â€”
policy_groups:
# 1. è‡ªåŠ¨æµ‹é€ŸèŠ‚ç‚¹ (åœ°åŒºåˆ†ç±») â€” ç»Ÿä¸€ interval/tolerance
- auto_test:
  name: é¦™æ¸¯èŠ‚ç‚¹
  policies: [å…¨éƒ¨èŠ‚ç‚¹]
  flatten: true
  filter: â€œğŸ‡­ğŸ‡°|é¦™æ¸¯|Hong\s*Kong|HongKong|HK(?!G)|HKGâ€
  interval: 300
  tolerance: 50
  icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/HongKong.png
- auto_test:
  name: ç¾å›½èŠ‚ç‚¹
  policies: [å…¨éƒ¨èŠ‚ç‚¹]
  flatten: true
  filter: â€œğŸ‡ºğŸ‡¸|ç¾å›½|United\s*States|USA|US(?!A)|States|Americanâ€
  interval: 300
  tolerance: 50
  icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/UnitedStates.png
- auto_test:
  name: å°æ¹¾èŠ‚ç‚¹
  policies: [å…¨éƒ¨èŠ‚ç‚¹]
  flatten: true
  filter: â€œğŸ‡¹ğŸ‡¼|å°æ¹¾|Taiwan|TW(?!N)|Tai|TWNâ€
  interval: 300
  tolerance: 50
  icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/Taiwan.png
- auto_test:
  name: æ—¥æœ¬èŠ‚ç‚¹
  policies: [å…¨éƒ¨èŠ‚ç‚¹]
  flatten: true
  filter: â€œğŸ‡¯ğŸ‡µ|æ—¥æœ¬|Japan|JP(?!N)|JPNâ€
  interval: 300
  tolerance: 50
  icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/Japan.png
- auto_test:
  name: ç‹®åŸèŠ‚ç‚¹
  policies: [å…¨éƒ¨èŠ‚ç‚¹]
  flatten: true
  filter: â€œğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®åŸ|Singapore|SG(?!P)|SGPâ€
  interval: 300
  tolerance: 50
  icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/Singapore.png
- auto_test:
  name: éŸ©å›½èŠ‚ç‚¹
  policies: [å…¨éƒ¨èŠ‚ç‚¹]
  flatten: true
  filter: â€œğŸ‡°ğŸ‡·|éŸ©å›½|Korea|KR(?!W)|KORâ€
  interval: 300
  tolerance: 50
  icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/Korea.png

# 2. èŠ‚ç‚¹ç­›é€‰ä¸æ¥æº
- select:
  name: å…¶ä»–èŠ‚ç‚¹
  policies: [å…¨éƒ¨èŠ‚ç‚¹]
  flatten: true
  filter: â€œ^(?!.*(ğŸ‡­ğŸ‡°|é¦™æ¸¯|Hong\s*Kong|HongKong|HK(?!G)|HKG|ğŸ‡ºğŸ‡¸|ç¾å›½|United\s*States|USA|US(?!A)|States|American|ğŸ‡¹ğŸ‡¼|å°æ¹¾|Taiwan|TW(?!N)|Tai|TWN|ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|Japan|JP(?!N)|JPN|ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®åŸ|Singapore|SG(?!P)|SGP|ğŸ‡°ğŸ‡·|éŸ©å›½|Korea|KR(?!W)|KOR)).*$â€
  icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/WorldMap.png
- external:
  name: å…¨éƒ¨èŠ‚ç‚¹
  type: select
  urls:
  - https://sub.store/download/collection/AllServer?target=Egern
  icon: ğŸŒ¹

# 3. è‡ªåŠ¨æµ‹é€Ÿä¼˜é€‰
- auto_test:
  name: è‡ªåŠ¨ä¼˜é€‰
  policies: [å…¨éƒ¨èŠ‚ç‚¹]
  flatten: true
  interval: 300
  tolerance: 50
  icon: âš¡ï¸

# 4. æ ¸å¿ƒç­–ç•¥ç»„ (æ‰‹åŠ¨é€‰æ‹©å…¥å£)
- select:
  name: è‡ªé€‰ç­–ç•¥
  policies: [è‡ªåŠ¨ä¼˜é€‰, é¦™æ¸¯èŠ‚ç‚¹, ç¾å›½èŠ‚ç‚¹, ç‹®åŸèŠ‚ç‚¹, å°æ¹¾èŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹, éŸ©å›½èŠ‚ç‚¹, å…¶ä»–èŠ‚ç‚¹, DIRECT]
  icon: ğŸ˜œ

# 5. Apple æœåŠ¡åˆ†æµ (éšè—ç»„)
- select:
  name: TestFlight
  policies: [ç¾å›½èŠ‚ç‚¹, è‡ªé€‰ç­–ç•¥]
  flatten: true
  icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/TestFlight.png
  hidden: true
- select:
  name: iCloud 
  policies: [DIRECT, è‡ªé€‰ç­–ç•¥]
  flatten: true
  icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/iCloud.png
  hidden: true
- select:
  name: AppleProxy
  policies: [ç¾å›½èŠ‚ç‚¹, è‡ªé€‰ç­–ç•¥]
  flatten: true
  icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/AppleProxy.png
  hidden: true

# 6. å¸¸ç”¨æœåŠ¡åˆ†æµç­–ç•¥ (A-Z æ’åº)
- select:
  name: AIGC
  policies: [ç¾å›½èŠ‚ç‚¹, è‡ªé€‰ç­–ç•¥]
  flatten: true
  icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/ChatGPT.png
- select:
  name: Apple
  policies: [DIRECT, è‡ªé€‰ç­–ç•¥]
  flatten: true
  icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/Apple.png
- select:
  name: Bing
  policies: [ç¾å›½èŠ‚ç‚¹, è‡ªé€‰ç­–ç•¥]
  flatten: true
  icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/Bing.png
- select:
  name: Disney
  policies: [ç‹®åŸèŠ‚ç‚¹, è‡ªé€‰ç­–ç•¥]
  flatten: true
  icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/Disney.png
- select:
  name: GitHub
  policies: [é¦™æ¸¯èŠ‚ç‚¹, è‡ªé€‰ç­–ç•¥]
  flatten: true
  icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/GitHub.png
- select:
  name: Google
  policies: [ç¾å›½èŠ‚ç‚¹, è‡ªé€‰ç­–ç•¥]
  flatten: true
  icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/Google.png
- select:
  name: HBO
  policies: [ç¾å›½èŠ‚ç‚¹, è‡ªé€‰ç­–ç•¥]
  flatten: true
  icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/HBO.png
- select:
  name: Microsoft
  policies: [DIRECT, è‡ªé€‰ç­–ç•¥]
  flatten: true
  icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/Microsoft.png
- select:
  name: Netflix
  policies: [ç‹®åŸèŠ‚ç‚¹, è‡ªé€‰ç­–ç•¥]
  flatten: true
  icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/Netflix.png
- select:
  name: PayPal
  policies: [ç¾å›½èŠ‚ç‚¹, è‡ªé€‰ç­–ç•¥]
  flatten: true
  icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/PayPal.png
- select:
  name: Spotify
  policies: [ç¾å›½èŠ‚ç‚¹, è‡ªé€‰ç­–ç•¥]
  flatten: true
  icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/Spotify.png
- select:
  name: Telegram
  policies: [é¦™æ¸¯èŠ‚ç‚¹, è‡ªé€‰ç­–ç•¥]
  flatten: true
  icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/Telegram.png
- select:
  name: TikTok
  policies: [æ—¥æœ¬èŠ‚ç‚¹, è‡ªé€‰ç­–ç•¥]
  flatten: true
  icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/TikTok.png
- select:
  name: Twitter
  policies: [é¦™æ¸¯èŠ‚ç‚¹, è‡ªé€‰ç­–ç•¥]
  flatten: true
  icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/Twitter.png
- select:
  name: WeChat
  policies: [DIRECT, è‡ªé€‰ç­–ç•¥]
  flatten: true
  icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/WeChat.png
- select:
  name: YouTubeMusic
  policies: [é¦™æ¸¯èŠ‚ç‚¹, è‡ªé€‰ç­–ç•¥]
  flatten: true
  icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/YouTubeMusic.png
- select:
  name: YouTube
  policies: [é¦™æ¸¯èŠ‚ç‚¹, è‡ªé€‰ç­–ç•¥]
  flatten: true
  icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/YouTube.png

# 7. å»å¹¿å‘Šç­–ç•¥ç»„
- select:
  name: çŒæ€å¹¿å‘Š
  policies: [REJECT, DIRECT]
  flatten: false
  icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/AdBlock.png

# â€” è§„åˆ™é›† â€”
rules:
# 1. å¹¿å‘Šæ‹¦æˆª
- rule_set:
  match: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/Egern/Rule/AdBlock.yaml
  policy: çŒæ€å¹¿å‘Š

# 2. å±€åŸŸç½‘ä¸åŸºç¡€ç›´è¿
- rule_set:
  match: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/Egern/Rule/Lan.yaml
  policy: DIRECT
- domain_suffix:
  match: ntp.org
  policy: DIRECT

# 3. Apple ç³»ç»ŸæœåŠ¡ç»†åˆ†
- rule_set:
  match: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/Egern/Rule/Apple.yaml
  policy: DIRECT
- rule_set:
  match: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/Egern/Rule/AppleProxy.yaml
  policy: AppleProxy
- rule_set:
  match: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/Egern/Rule/TestFlight.yaml
  policy: TestFlight
- rule_set:
  match: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/Egern/Rule/iCloud.yaml
  policy: iCloud

# 4. å…³é”®åº”ç”¨åˆ†æµ (A-Z æ’åº)
- rule_set:
  match: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/Egern/Rule/AIGC.yaml
  policy: AIGC
- rule_set:
  match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Bing/Bing.list
  policy: Bing
- rule_set:
  match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Disney/Disney.list
  policy: Disney
- rule_set:
  match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/GitHub/GitHub.list
  policy: GitHub
- rule_set:
  match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Google/Google.list
  policy: Google
- rule_set:
  match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/HBO/HBO.list
  policy: HBO
- rule_set:
  match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Microsoft/Microsoft.list
  policy: Microsoft
- rule_set:
  match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Netflix/Netflix.list
  policy: Netflix
- rule_set:
  match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/PayPal/PayPal.list
  policy: PayPal
- rule_set:
  match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Spotify/Spotify.list
  policy: Spotify
- rule_set:
  match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Telegram/Telegram.list
  policy: Telegram
- rule_set:
  match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/TikTok/TikTok.list
  policy: TikTok
- rule_set:
  match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Twitter/Twitter.list
  policy: Twitter
- rule_set:
  match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/WeChat/WeChat.list
  policy: WeChat
- rule_set:
  match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/YouTubeMusic/YouTubeMusic.list
  policy: YouTubeMusic
- rule_set:
  match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/YouTube/YouTube.list
  policy: YouTube

# 5. å›½å†…ç›´è¿å…œåº•
- domain_suffix:
  match: cn
  policy: DIRECT
- geoip:
  match: CN
  policy: DIRECT
  no_resolve: true

# 6. æœ€ç»ˆå…œåº•
- default:
  policy: è‡ªé€‰ç­–ç•¥

# â€” MITM é…ç½® â€”
mitm:
ca_p12: egern.p12
ca_passphrase: egern

# â€” æ¨¡å—é…ç½® â€”
modules:
- name: é¢æ¿åˆé›†
  url: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/Egern/Module/Panel.yaml
  enabled: true
- name: Sub-Store
  url: https://raw.githubusercontent.com/sub-store-org/Sub-Store/master/config/Egern.yaml
  enabled: true
- name: ScriptHub
  url: https://raw.githubusercontent.com/Script-Hub-Org/Script-Hub/main/modules/script-hub.surge.sgmodule
  enabled: true
- name: WeatherKit
  url: https://github.com/NSRingo/WeatherKit/releases/latest/download/iRingo.WeatherKit.sgmodule
  enabled: true
- name: Spotify
  url: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/Egern/Module/Spotify.yaml
  enabled: true
- name: YouTube Enhance
  url: https://raw.githubusercontent.com/Maasea/sgmodule/master/YouTube.Enhance.sgmodule
  enabled: true
- name: é›ªçƒå»å¹¿å‘Š
  url: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/Egern/Module/Xueqiu.yaml
  enabled: true
- name: é«˜å¾·åœ°å›¾å»å¹¿å‘Š
  url: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/Egern/Module/AmapAdBlock.yaml
  enabled: true
- name: ç™¾åº¦åœ°å›¾å»å¹¿å‘Š
  url: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/Egern/Module/BaiduMapAdBlock.yaml
  enabled: true
- name: BiliBiliå»å¹¿å‘Š
  url: https://raw.githubusercontent.com/app2smile/rules/master/module/bilibili.sgmodule
  enabled: true
- name: KuGou
  url: https://raw.githubusercontent.com/Yu9191/Rewrite/refs/heads/main/KuGou.sgmodule
  enabled: true
- name: KuWo
  url: https://raw.githubusercontent.com/Yuheng0101/X/main/Scripts/Kuwo/kuwo.sgmodule
  enabled: true
- name: Ximalaya
  url: â€œhttp://script.hub/file/*start*/https://raw.githubusercontent.com/WeiGiegie/666/main/ximalaya.js/*end*/ximalaya.sgmodule?type=qx-rewrite&target=surge-module&del=true&jqEnabled=trueâ€
  enabled: true