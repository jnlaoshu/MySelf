[General]
# > ğ¥ğšğ¨ğ¬ğ¡ğ®@ğ’ğ®ğ«ğ ğğğ«ğ¨ ä¸“ç”¨é…ç½®
# > é…ç½®ä¸‹è½½ğ”ğ‘ğ‹ï¼š https://raw.githubusercontent.com/jnlaoshu/MySelf/master/Surge/Config.conf
# > èŠ±æ ·å­—ä½“ç”Ÿæˆï¼š https://qwerty.dev/fancy-font-generator/
# > æœºåœºè½¬ä¹‰ğ„ğğ‚ğğƒğ„ï¼š https://www.urlencoder.org
# > ğ”ğ©ğğšğ­ğ: 2025.12.18 18:45

# > éšè— VPN å›¾æ ‡
hide-vpn-icon = false

# > å¢å¼ºç‰ˆ Wi-Fi åŠ©ç†
wifi-assist = false
# > æ··åˆç½‘ç»œ
all-hybrid = false

# > Internet æµ‹è¯• URL (ç”¨äºæ£€æµ‹äº’è”ç½‘è”é€šæ€§)
internet-test-url = http://wifi.vivo.com.cn/generate_204
# > ä»£ç†æµ‹é€Ÿ URL (ç”¨äºèŠ‚ç‚¹æµ‹é€Ÿ)
proxy-test-url = http://www.gstatic.com/generate_204
# > æµ‹è¯•è¶…æ—¶ï¼ˆç§’ï¼‰
test-timeout = 5

# > GeoIP æ•°æ®åº“
geoip-maxmind-url = https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country.mmdb
disable-geoip-db-auto-update = false

# > IPv6 æ”¯æŒ 
ipv6 = true

# > å…è®¸ Wi-Fi/çƒ­ç‚¹ è®¿é—®
allow-wifi-access = true
wifi-access-http-port = 6152
wifi-access-socks5-port = 6153
allow-hotspot-access = true
http-listen = 127.0.0.1:6152
socks5-listen = 127.0.0.1:6153
use-default-policy-if-wifi-not-primary = false

# > HTTP-API (ç”¨äºæ§åˆ¶å°å’Œé¢æ¿)
http-api = laoshu@0.0.0.0:6170
http-api-tls = false
http-api-web-dashboard = true

# > è·³è¿‡ä»£ç† (ç›´è¿ç½‘æ®µ)
skip-proxy = 127.0.0.1, 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, 100.64.0.0/10, localhost, *.local, passenger.12306.cn, www.baidu.com

# > è·¯ç”±é˜²ç«å¢™
include-all-networks = false
include-local-networks = false

# > æ—¥å¿—ç­‰çº§
loglevel = notify
show-error-page-for-reject = true

# > Always Real IP (è§£å†³éƒ¨åˆ†åº”ç”¨æ¨é€å’Œè¿æ¥é—®é¢˜)
always-real-ip = *.lan, *.msftconnecttest.com, *.msftncsi.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.apple.com

# > DNS è®¾ç½®
# åŠ«æŒä¼ ç»Ÿ DNS è¯·æ±‚
hijack-dns = *:53
# é»˜è®¤ DNS æœåŠ¡å™¨
dns-server = 223.5.5.5, 119.29.29.29
# åŠ å¯† DNS (DOH/DOQ)
encrypted-dns-server = https://dns.alidns.com/dns-query, https://doh.pub/dns-query
# å…³é—­ DOH è¯ä¹¦éªŒè¯ (æé«˜å…¼å®¹æ€§)
doh-skip-cert-verification = true
# è¯»å–ç³»ç»Ÿ hosts
read-etc-hosts = true
# ä»£ç†è¯·æ±‚ä½¿ç”¨æœ¬åœ° DNS æ˜ å°„ (é€šå¸¸è®¾ä¸º false)
use-local-host-item-for-proxy = false

# > UDP è®¾ç½®
# é‡åˆ°ä¸æ”¯æŒ UDP çš„ä»£ç†æ—¶æ‹’ç»
udp-policy-not-supported-behaviour = REJECT
# æé«˜ UDP ä¼˜å…ˆçº§ (å¯¹æ¸¸æˆå’Œè¯­éŸ³é€šè¯æœ‰å¸®åŠ©)
udp-priority = true

# > å…¼å®¹æ€§æ¨¡å¼
# 0: è‡ªåŠ¨/è½»é‡ (æ¨è); 1: Proxy-First; 3: VIF-Only
# å®˜æ–¹å»ºè®®ä¿æŒé»˜è®¤(æ³¨é‡Šæ‰)ï¼Œé™¤éé‡åˆ°ä¸¥é‡çš„ç½‘ç»œå…¼å®¹æ€§é—®é¢˜
# compatibility-mode = 1

# > æ’é™¤ç®€å•ä¸»æœºå
exclude-simple-hostnames = true

[Proxy Group]
Naiyun = select, policy-path=https%3A%2F%2Fsubmit.mylac.cn%3A20443%2Fapi%2Fv1%2Fclient%2Fsubscribe%3Ftoken%3D137f3ae5248ac71fcb7c26ae4f7f33&alert=1&title=Naiyun, update-interval=3600, no-alert=0, hidden=0, include-all-proxies=0

# ä¸»ç­–ç•¥
Proxy = select, Auto, AllServer, HongKong, TaiWan, Japan, Singapore, United States, Korea, Other

# è‡ªåŠ¨é€‰æ‹©
Auto = url-test, url=http://www.gstatic.com/generate_204, policy-path=https://sub.store/download/collection/AllServer?target=Surge, interval=600, tolerance=50

# ç­–ç•¥ç»„
Google = select, Auto, AllServer, HongKong, TaiWan, Japan, Singapore, United States, Korea, Other
TikTok = select, Auto, AllServer, HongKong, TaiWan, Japan, Singapore, United States, Korea, Other
Twitter = select, Auto, AllServer, HongKong, TaiWan, Japan, Singapore, United States, Korea, Other
Telegram = select, Auto, AllServer, HongKong, TaiWan, Japan, Singapore, United States, Korea, Other
YouTube = select, Auto, AllServer, HongKong, TaiWan, Japan, Singapore, United States, Korea, Other

# åœ°åŒºåˆ†ç»„ (Regex ç­›é€‰)
HongKong = url-test, url=http://www.gstatic.com/generate_204, interval=1200, tolerance=50, update-interval=0, include-other-group="Auto", policy-regex-filter=ğŸ‡­ğŸ‡°|æ¸¯|HK|Hong
TaiWan = url-test, url=http://www.gstatic.com/generate_204, interval=1200, tolerance=50, update-interval=0, include-other-group="Auto", policy-regex-filter=ğŸ‡¹ğŸ‡¼|å°|TW|Tai
Japan = url-test, url=http://www.gstatic.com/generate_204, interval=1200, tolerance=50, update-interval=0, include-other-group="Auto", policy-regex-filter=ğŸ‡¯ğŸ‡µ|æ—¥|JP|Japan
Singapore = url-test, url=http://www.gstatic.com/generate_204, interval=1200, tolerance=50, update-interval=0, include-other-group="Auto", policy-regex-filter=ğŸ‡¸ğŸ‡¬|å¡|ç‹®åŸ|SG|Singapore
United States = url-test, url=http://www.gstatic.com/generate_204, interval=1200, tolerance=50, update-interval=0, include-other-group="Auto", policy-regex-filter=ğŸ‡ºğŸ‡¸|ç¾|US|States|American
Korea = url-test, url=http://www.gstatic.com/generate_204, interval=1200, tolerance=50, update-interval=0, include-other-group="Auto", policy-regex-filter=ğŸ‡°ğŸ‡·|éŸ©|KR|KOR|Korea
Other = select, include-other-group="Auto", policy-regex-filter=^((?!ğŸ‡­ğŸ‡°|æ¸¯|HK|Hong|ğŸ‡¹ğŸ‡¼|å°|TW|Tai|ğŸ‡¯ğŸ‡µ|æ—¥|JP|Japan|ğŸ‡¸ğŸ‡¬|å¡|ç‹®åŸ|SG|Singapore|ğŸ‡°ğŸ‡·|éŸ©|KR|KOR|Korea|ğŸ‡ºğŸ‡¸|ç¾|US|States|American|Music).)*$

AllServer = select, url=http://www.gstatic.com/generate_204, policy-path=https://sub.store/download/collection/AllServer?target=Surge, update-interval=0

[Rule]
# > å±è”½ HTTP3/QUIC (ä¿è¯ç¨³å®šæ€§ï¼Œå¼ºåˆ¶å›è½ TCP)
AND,((PROTOCOL,UDP),(DEST-PORT,443)),REJECT-NO-DROP
# > å±è”½ YouTube QUIC (é˜²æ­¢ç¼“å†²é—®é¢˜)
AND,((PROTOCOL,UDP),(DOMAIN-SUFFIX,googlevideo.com)),REJECT-NO-DROP

# > éšç§ä¸å®‰å…¨
DOMAIN,app-site-association.cdn-apple.com,REJECT
DOMAIN,ocsp.apple.com,REJECT

# > æœ¬åœ°/ç‰¹å®šåŠŸèƒ½
DOMAIN-KEYWORD,jsdelivr.net,Proxy
DOMAIN-SUFFIX,vercel.app,Proxy
DOMAIN,beta.apple.com,Proxy
DOMAIN,testflight.apple.com,Proxy

# > è§„åˆ™é›† (Rule-Sets)
# ç›´è¿ä¿®æ­£
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Direct/Direct.list,DIRECT
# å¹¿å‘Šæ‹¦æˆª
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Advertising/Advertising_All_No_Resolve.list,REJECT
# Apple
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Apple/Apple_All_No_Resolve.list,DIRECT
# Microsoft
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Microsoft/Microsoft.list,DIRECT
# WeChat
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/WeChat/WeChat_Resolve.list,DIRECT

# > ä»£ç†åº”ç”¨
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Bing/Bing.list,United States
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/OpenAI/OpenAI_Resolve.list,United States
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Google/Google_Resolve.list,Google
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/GoogleVoice/GoogleVoice.list,Google
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/PayPal/PayPal.list,United States
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Spotify/Spotify_Resolve.list,United States

# > Telegram (é˜²é¢‘ç¹è¯·æ±‚ + è§„åˆ™)
AND,((PROCESS-NAME,Telegram), (OR,((IP-CIDR,0.0.0.0/8), (IP-CIDR,224.0.0.0/4)))),REJECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Telegram/Telegram_Resolve.list,Telegram

# > ç¤¾äº¤åª’ä½“
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Twitter/Twitter_Resolve.list,Twitter
RULE-SET,https://raw.githubusercontent.com/Semporia/TikTok-Unlock/master/Surge/TikTok.list,TikTok
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/YouTube/YouTube_Resolve.list,YouTube
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/YouTubeMusic/YouTubeMusic.list,YouTube

# > å…œåº•åˆ†æµ
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Global/Global_All_No_Resolve.list,Proxy
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/China/China_All_No_Resolve.list,DIRECT

# > å±€åŸŸç½‘ä¸ GeoIP
IP-CIDR,0.0.0.0/32,REJECT,no-resolve
RULE-SET,LAN,DIRECT
GEOIP,CN,DIRECT
FINAL,Proxy,dns-failed

[Host]
# > æœ¬åœ°æ˜ å°„
ip6-localhost = ::1
ip6-loopback = ::1
router.asus.com = server:syslib
tplogin.cn = server:syslib
tplinklogin.net = server:syslib
*.lan = server:syslib
# ä¿®å¤ Google åœ°å›¾ä¸­å›½ç‰ˆé‡å®šå‘é—®é¢˜
*.google.cn = server:142.250.204.46

[URL Rewrite]
# > é‡å®šå‘ Google æœç´¢å’Œåœ°å›¾ (å°† .cn é‡å†™ä¸º .com)
^https?:\/\/(www.)?(g|google)\.cn https://www.google.com 302
^https?:\/\/(ditu|maps).google\.cn https://maps.google.com 302

[Script]
Sub-Store Core = type=http-request,pattern=^https?:\/\/sub\.store\/((download)|api\/(preview|sync|(utils\/node-info))),script-path=https://github.com/sub-store-org/Sub-Store/releases/latest/download/sub-store-1.min.js,requires-body=true,timeout=120,ability=http-client-policy,engine=auto
Sub-Store Simple = type=http-request,pattern=^https?:\/\/sub\.store,script-path=https://github.com/sub-store-org/Sub-Store/releases/latest/download/sub-store-0.min.js,requires-body=true,timeout=120,engine=auto
æœºåœºä¿¡æ¯ = type=http-request,timeout=10,pattern=http://sub\.info,script-path=https://raw.githubusercontent.com/jnlaoshu/MySelf/master/Surge/Sub_info.js
è¿è¡Œæ—¶é•¿ = type = generic,timeout=10,script-path=https://raw.githubusercontent.com/jnlaoshu/MySelf/master/Surge/StartTime.js
ä»Šæ—¥é»„å†&èŠ‚å‡æ—¥å€’æ•° = type=generic, timeout=10, script-path=https://raw.githubusercontent.com/jnlaoshu/MySelf/main/Script/TodayAlmanac.js
ç½‘ç»œä¿¡æ¯ = type=generic, timeout=10, script-path=https://raw.githubusercontent.com/jnlaoshu/MySelf/main/Script/NetworkInfo.js
æµåª’ä½“&AIæœåŠ¡è§£é”æ£€æµ‹ = type=generic, timeout=15, script-path=https://raw.githubusercontent.com/jnlaoshu/MySelf/main/Script/ServiceDetection.js

[Panel]
ç­–ç•¥é¢æ¿1 = script-name=è¿è¡Œæ—¶é•¿,title=è¿è¡Œæ—¶é•¿,content=è¯·åˆ·æ–°,update-interval=1
ä»Šæ—¥é»„å†&èŠ‚å‡æ—¥å€’æ•° = script-name=ä»Šæ—¥é»„å†&èŠ‚å‡æ—¥å€’æ•°, update-interval=1800
ç­–ç•¥é¢æ¿2 = script-name=ç½‘ç»œä¿¡æ¯,title=ç½‘ç»œä¿¡æ¯,content=è¯·åˆ·æ–°,style=info
æµåª’ä½“&AIæœåŠ¡è§£é”æ£€æµ‹ = script-name=æµåª’ä½“&AIæœåŠ¡è§£é”æ£€æµ‹, title="æµåª’ä½“&AIæœåŠ¡è§£é”æ£€æµ‹", content="è¯·åˆ·æ–°é¢æ¿", 

[MITM]
skip-server-cert-verify = true
h2 = true
hostname = sub.store, testflight.apple.com, *.google.cn, *.google.com.hk
